# é€Ÿé€šCè¯­è¨€ç†è®º

### Cè¯­è¨€æ ‡è¯†ç¬¦

> C è¯­è¨€æ ‡è¯†ç¬¦ = å­—æ¯ / æ•°å­— / ä¸‹åˆ’çº¿
> 
> ä¸èƒ½ä»¥æ•°å­—å¼€å¤´
> 
> å…¶ä»–ç¬¦å·ä¸€å¾‹ä¸è¡Œ

### å·¦å€¼å³å€¼

å·¦å€¼ï¼š`++i`

å³å€¼ï¼š`i++`

`a=b=c`åˆæ³•å¯æ‰§è¡Œï¼šb=c->a=b

`(i=j)=1`ä¸åˆæ³•


### å¸¸é‡æŒ‡é’ˆå’ŒæŒ‡é’ˆå¸¸é‡

```c
const int *p //å¸¸é‡(çš„)æŒ‡é’ˆ
int const *p //ä¸ä¸Šé¢ç›¸åŒ


int a = 10;
int b = 20;

const int *p = &a;

*p = 30;   // âŒ é”™è¯¯ï¼šä¸èƒ½é€šè¿‡ p ä¿®æ”¹ a
p = &b;    // âœ… æ­£ç¡®ï¼šp å¯ä»¥æŒ‡å‘ b
```
å¸¸é‡æŒ‡é’ˆä¸ºæŒ‡é’ˆpå¯ä»¥æ”¹ï¼Œä¸èƒ½é€šè¿‡pä¿®æ”¹æ‰€æŒ‡å‘çš„å€¼

```c
int * const p = &a; //æŒ‡é’ˆå¸¸é‡

int a = 10;
int b = 20;

int * const p = &a;

*p = 30;   // âœ… æ­£ç¡®ï¼ša è¢«æ”¹æˆ 30
p = &b;    // âŒ é”™è¯¯ï¼šp æ˜¯å¸¸é‡æŒ‡é’ˆï¼Œä¸èƒ½æ”¹æŒ‡å‘
```
| ç±»å‹   | å†™æ³•              | èƒ½å¦æ”¹æŒ‡å‘ | èƒ½å¦æ”¹å†…å®¹ |
| ---- | --------------- | ----- | ----- |
| å¸¸é‡æŒ‡é’ˆ | `const int *p`  | âœ… å¯ä»¥  | âŒ ä¸å¯ä»¥ |
| æŒ‡é’ˆå¸¸é‡ | `int * const p` | âŒ ä¸å¯ä»¥ | âœ… å¯ä»¥  |

> const åœ¨ * å·¦è¾¹ â†’ å€¼ä¸èƒ½æ”¹
> 
> const åœ¨ * å³è¾¹ â†’ æŒ‡é’ˆä¸èƒ½æ”¹



### å‡½æ•°æŒ‡é’ˆ

```c
int Fun(int x);
int (*p)(int x);//å®šä¹‰ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆ
p=Func;
```

### sizeofçš„åŒºåˆ«

> sizeof(æ•°ç»„å) ç­‰äºæ•´ä¸ªæ•°ç»„å¤§å°
>
> **ä½†å‰ææ˜¯ï¼šæ•°ç»„åæ²¡æœ‰å‘ç”Ÿâ€œé€€åŒ–ä¸ºæŒ‡é’ˆâ€**

```c
int a[2][3];
sizeof(a)=24;


void f(int a[3][2]) {
    sizeof(a)=4;
}
```
### äºŒç»´æ•°ç»„ä¼ å‚

> è¡Œæ•°ï¼šå¯ä»¥çœ
>
> åˆ—æ•°ï¼šå¿…é¡»ç»™
>
> ç±»å‹æœ¬è´¨ï¼šint (*)[åˆ—æ•°]

| å½¢å‚å£°æ˜          | æ˜¯å¦æ­£ç¡® |
| ------------- | ---- |
| `int a[][2]`  | âœ…    |
| `int a[3][2]` | âœ…    |
| `int (*a)[2]` | âœ…    |
| `int a[][]`   | âŒ    |
| `int a[][3]`  | âŒ    |
| `int **a`     | âŒ    |
| `int a[3][]`  | âŒ    |

### æŒ‡é’ˆçš„æ•°ç»„å’Œæ•°ç»„çš„æŒ‡é’ˆ

> çœ‹ [] å’Œ * è°â€œç¦»å˜é‡åæ›´è¿‘â€

- [ ] æ›´è¿‘ â†’ æŒ‡é’ˆæ•°ç»„
- \*æ›´è¿‘ï¼ˆé€šå¸¸è¦ç”¨æ‹¬å·ï¼‰ â†’ æ•°ç»„æŒ‡é’ˆ

| é¡¹ç›®          | æŒ‡é’ˆæ•°ç»„             | æ•°ç»„æŒ‡é’ˆ          |
| ----------- | ---------------- | ------------- |
| å®šä¹‰          | `int *p[3]`      | `int (*p)[3]` |
| æœ¬è´¨          | æ•°ç»„               | æŒ‡é’ˆ            |
| å…ƒç´           | æŒ‡é’ˆ               | æ•°ç»„            |
| `sizeof(p)` | 3 Ã— sizeof(int*) | sizeof(æŒ‡é’ˆ)    |
| å¸¸è§ç”¨é€”        | å­—ç¬¦ä¸²æ•°ç»„            | äºŒç»´æ•°ç»„          |

### malloc

å…¶è¿”å› void*ï¼Œä¸éœ€è¦å¼ºåˆ¶ç±»å‹è½¬æ¢ä¸ºåˆé€‚æŒ‡é’ˆç±»å‹ã€‚

### Cè¯­è¨€åŸºæœ¬æ•°æ®ç±»å‹

- æ•´å‹
- å®å‹
- å­—ç¬¦å‹

### åˆæ³•å­—ç¬¦ä¸²å®šä¹‰

| å®šä¹‰æ–¹å¼                             | åˆæ³• | å¸¸ç”¨  | æ˜¯å¦å¯ä¿®æ”¹ | å¤‡æ³¨        |
| -------------------------------- | -- | --- | ----- | --------- |
| `char s[] = "abc";`              | âœ…  | â­â­â­ | âœ…     | **æœ€æ¨è**   |
| `char s[4] = "abc";`             | âœ…  | â­â­â­ | âœ…     | è¦ç•™ `\0`   |
| `char s[] = {'a','b','c','\0'};` | âœ…  | â­â­  | âœ…     | æœ¬è´¨ç­‰ä»·      |
| `char *s = "abc";`               | âœ…  | â­â­â­ | âŒ     | **ä¸èƒ½æ”¹å†…å®¹** |
| `char *s; s="abc";`              | âŒ  | âŒ   | â€”     | éæ³•        |
| `char s[3] = "abc";`             | âŒ  | âŒ   | â€”     | å°‘äº† `\0`   |
| `char s[4]; s="abc";`            | âŒ  | âŒ   | â€”     | æ•°ç»„ä¸å¯æ•´ä½“èµ‹å€¼  |


### strlen vs sizeof


```c
sizeof(s)
```

* å…³æ³¨çš„æ˜¯ï¼š**s å äº†å¤šå°‘å†…å­˜**
* ä¸å­—ç¬¦ä¸²å†…å®¹æ— å…³
* å¯¹æ•°ç»„ï¼šè¿”å› **æ•°ç»„æ€»å¤§å°**

ğŸ‘‰ ç»“æœæ˜¯ **10**


```c
strlen(s)
```

* å…³æ³¨çš„æ˜¯ï¼š**å­—ç¬¦ä¸²æœ‰å¤šé•¿**
* é€å­—ç¬¦æ‰«æï¼Œç›´åˆ° `'\0'`
* ä¸åŒ…å«ç»“æŸç¬¦

ğŸ‘‰ ç»“æœæ˜¯ **5**

| é¡¹ç›®        | sizeof    | strlen |
| --------- | --------- | ------ |
| å…³æ³¨ç‚¹       | å†…å­˜å¤§å°      | å­—ç¬¦ä¸²é•¿åº¦  |
| æ˜¯å¦å‡½æ•°      | âŒï¼ˆè¿ç®—ç¬¦ï¼‰    | âœ…ï¼ˆå‡½æ•°ï¼‰  |
| è®¡ç®—æ—¶æœº      | ç¼–è¯‘æœŸï¼ˆæ™®é€šæ•°ç»„ï¼‰ | è¿è¡ŒæœŸ    |
| æ˜¯å¦ç»Ÿè®¡ `\0` | âœ…         | âŒ      |
| æ˜¯å¦ä¾èµ–å†…å®¹    | âŒ         | âœ…      |


> `sizeof(s)` è¿”å›çš„æ˜¯å­—ç¬¦æ•°ç»„ `s` å ç”¨çš„å­˜å‚¨ç©ºé—´å¤§å°ï¼ˆ10 å­—èŠ‚ï¼‰ï¼Œ
> è€Œ `strlen(s)` è¿”å›çš„æ˜¯å­—ç¬¦ä¸²ä¸­å®é™…å­—ç¬¦çš„ä¸ªæ•°ï¼Œä¸åŒ…å«ç»“å°¾çš„ `'\0'`ï¼Œå› æ­¤å…¶å€¼ä¸º 5ã€‚

### ç©ºå­—ç¬¦ä¸²

```c
""//ç©ºå­—ç¬¦ä¸²

'\0'//ä¸æ˜¯ç©ºå­—ç¬¦ä¸²
```

### ä»£ç åˆ†æç›¸å…³

```c
int main(void){
    char ch[10];
    int i;
    for(i=0;i<10;i++){
         printf("%d",ch[i]);
    }
    return 0;
}
```

> è¿™é‡Œè¾“å‡ºçš„å€¼ä¸ºæ— æ³•ç¡®å®šï¼Œå› ä¸ºchä¸º**å±€éƒ¨å˜é‡ï¼Œå…¶ä¸­çš„å€¼æœªåˆå§‹åŒ–**


```c
int main(){
    char str1[100];
    char str2[100];
    strcpy(str1,"theseStrings");
    strcpy(str2,"thesestrings");
    printf("%d\n",strncmp(str1,str2,5));
    printf("%d\n",strcmp(str1,str2));
    return 0;
}
```

> ï¼Œç¬¬äºŒä¸ªprintfè¾“å‡ºä¸ºå°äº0ï¼Œæ³¨æ„å°å†™å­—æ¯çš„ASCIIç æ›´å¤§


```c
#include <stdio.h>
#include <string.h>

int val(char c) {
    switch (c) {
        case 'I': return 1;
        case 'V': return 5;
        case 'X': return 10;
        case 'L': return 50;
        case 'C': return 100;
        case 'D': return 500;
        case 'M': return 1000;
        default: return 0;
    }
}

int romanToInt(const char* s) {
    int res = 0;
    int len = strlen(s);
    int i;
    for (i = 0; i < len; i++) {
        if (i + 1 < len && val(s[i]) < val(s[i+1])) {
            res += (val(s[i+1]) - val(s[i])); 

            //æ­¤å¤„éœ€è¦å¢åŠ i++æ‰æ˜¯æ­£ç¡®çš„ä»£ç 

        } else {
            res += val(s[i]);
        }
    }
    return res;
}

int main(void) {
    char ch[] = "IX";
    printf("Input: %s, Output: %d\n", ch, romanToInt(ch));
    return 0;
}
```

> åœ¨å‡æ³•è§„åˆ™ä¸‹ï¼Œä¸€ä¸ªå­—ç¬¦å¯¹ï¼ˆå¦‚ IXï¼‰ä¼šåœ¨åŒä¸€æ¬¡å¾ªç¯ä¸­è¢«ä¸€èµ·å¤„ç†ï¼Œ
> è‹¥ä¸æ‰‹åŠ¨é€’å¢ i è·³è¿‡ä¸‹ä¸€ä¸ªå­—ç¬¦ï¼Œåˆ™è¯¥å­—ç¬¦ä¼šåœ¨ä¸‹ä¸€è½®å¾ªç¯ä¸­è¢«é‡å¤è®¡ç®—ï¼Œ
> å› æ­¤å¿…é¡»åœ¨ if åˆ†æ”¯ä¸­å¢åŠ  i++ã€‚

```c
int m=20; 
while (m<30)
m=m++;
```

> å‡ºç°æœªå®šä¹‰è¡Œä¸º





### å­—ç¬¦ä¸²ä¸å­—ç¬¦æ•°ç»„

`char s[] = {'h', 'e', 'l', 'l', 'o'};` èƒ½å¤Ÿæ­£ç¡®èµ‹å€¼(ä½œä¸ºå­—ç¬¦æ•°ç»„)ï¼Œä½†ä½œä¸ºå­—ç¬¦ä¸²ï¼Œæ­¤å®šä¹‰ä¸åˆæ³•

### char s[]å’Œchar*p

è¿™é‡Œchar s[]æŒ‡å‘çš„å­—ç¬¦ä¸²çš„å†…éƒ¨å…ƒç´ å¯ä¿®æ”¹ï¼Œä½†åè€…ä¸å¯ä»¥

### ç»“æ„ä½“ç›¸å…³

```c
struct ord {
    int x;
    int y;
    int z;
};
struct ord a;//æ­£ç¡®

struct ord {
    int x;
    int y;
    int z;
} a;//æ­£ç¡®

struct ord {int x; int y; int z;}struct ord a;//é”™è¯¯
```

```c
struct student 
{
 int num;
 char name[9];
} stu;
```

> studentä¸ºç»“æ„ä½“åï¼Œstruct studentä¸ºç»“æ„ä½“ç±»å‹åï¼Œstuä¸ºç»“æ„ä½“å˜é‡

### å¯¹é½å€¼

> è®¾ #pragma pack(n) ç”Ÿæ•ˆï¼Œåˆ™ï¼š

**æˆå‘˜çš„å¯¹é½å€¼**

æˆå‘˜å¯¹é½å€¼ = min(è¯¥æˆå‘˜ç±»å‹çš„è‡ªç„¶å¯¹é½å€¼, n)

**ç»“æ„ä½“æ•´ä½“å¯¹é½å€¼**

ç»“æ„ä½“æ•´ä½“å¯¹é½å€¼ = min(ç»“æ„ä½“ä¸­æœ€å¤§æˆå‘˜çš„è‡ªç„¶å¯¹é½å€¼, n)

âš ï¸ æ³¨æ„ï¼š

æ•´ä½“å¯¹é½å€¼ â‰  sizeof(struct)

æ•´ä½“å¯¹é½å€¼åªå†³å®š ç»“æ„ä½“ç»“å°¾æ˜¯å¦è¦è¡¥é½

```c
#pragma pack(2)
struct A {
    char  c;   // 1
    int   i;   // 4
    short s;   // 2
};
//å¤§å°ä¸º8

#pragma pack(1)
struct A {
    char  c;
    int   i;
    short s;
};
//å¤§å°ä¸º7
```

### ä½åŸŸ

- ç±»å‹å¯ä»¥æ˜¯intã€unsigned intã€_Boolï¼Œä¸èƒ½æ˜¯float
- åŒ¿åä½åŸŸï¼šè·³è¿‡è‹¥å¹²ä½
- 0å®½åº¦ä½åŸŸï¼šå æ»¡å½“å‰æ•´æ•°å¹¶åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ª





### æšä¸¾


âœ… èƒ½åšçš„

- æšä¸¾å¸¸é‡æ˜¯ æ•´æ•°

- å¯ä»¥æ¯”è¾ƒå¤§å°

- å¯ä»¥æŒ‡å®šæ•´æ•°å€¼

- å¯ä»¥å¤šä¸ªæˆå‘˜åŒå€¼

âŒ ä¸èƒ½åšçš„

- ä¸èƒ½èµ‹å­—ç¬¦ä¸²

- ä¸èƒ½èµ‹æµ®ç‚¹æ•°

- ä¸èƒ½å½“çœŸæ­£çš„å¼ºç±»å‹ç”¨ï¼ˆåœ¨ C ä¸­ï¼‰

### Cè¯­è¨€ç¼–è¯‘è¿‡ç¨‹

é¢„å¤„ç†->ç¼–è¯‘->é“¾æ¥

å› ä¸ºæ˜¯å¯¹äºŒè¿›åˆ¶æ–‡ä»¶é“¾æ¥ï¼Œéœ€è¦å…ˆç¼–è¯‘



